<%- include ('../layouts/userheader.ejs')%>


<body id="category">
<!-- Start Header Area -->
<header class="header_area sticky-header">
    <div class="main_menu">
        <nav class="navbar navbar-expand-lg navbar-light main_box">
            <div class="container">
                <!-- Brand and toggle get grouped for better mobile display -->
                <a class="navbar-brand logo_h" href="#"><img src="/user/img/logo.png" alt=""></a>
                <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent"
                 aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                    <span class="icon-bar"></span>
                </button>
                <!-- Collect the nav links, forms, and other content for toggling -->
                <div class="collapse navbar-collapse offset" id="navbarSupportedContent">
						<ul class="nav navbar-nav menu_nav ml-auto">
							 <li class="nav-item "><a class="nav-link" href="/home">Home</a></li>
							 <li class="nav-item submenu dropdown">
								  <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
									aria-expanded="false">Categories</a>
								  <ul class="dropdown-menu">
                                <% if (category && category.length > 0) { %>
                                    <% for (let i = 0; i < category.length; i++) { %>
                                        <li class="nav-item">
                                            <a class="nav-link" href="/shop?category=<%= category[i]._id%>&sortValue=&minPrice=&maxPrice=&search="><%= category[i].categoryName %></a>
                                        </li>
                                    <% } %>
                                <% } else { %>
                                    <li class="nav-item">
                                        <a class="nav-link" href="#">No categories available</a>
                                    </li>
                                <% } %>
                            </ul>
							 </li>
							 <li class="nav-item "><a class="nav-link" href="/shop" >shop</a></li>
							 <li class="nav-item active"><a class="nav-link" href="/contact">Contact</a></li>
							 <li class="nav-item "><a class="nav-link" href="/cart">cart</a></li>
							 <li class="nav-item submenu dropdown">
								  <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true"
									aria-expanded="false">wish List  <span class="ti-heart"></span></a>
								  <ul class="dropdown-menu">
										<li class="nav-item"><a class="nav-link" href="#">Item1</a></li>
										<li class="nav-item"><a class="nav-link" href="#">Item2</a></li>
										<li class="nav-item active"><a class="nav-link" href="/Wishlist">Goto Wishlist</a></li>
										
								  </ul>
							 </li>
							 <li class="nav-item submenu dropdown">
								  <a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">
   <% if (user && user.image) { %>
       User <img class="rounded-circle" src="/images/userProfile/<%=user.image%>" alt="" style="width: 20px; height: 20px;">
   <% } else { %>
       User <!-- Handle the case where user or user.image is null or undefined -->
   <% } %>
</a>
								  <ul class="dropdown-menu">
										<li class="nav-item" ><a class="nav-link" href="/logout">Logout</a></li>
										<li class="nav-item"><a class="nav-link" href="/edit?id=<%=user._id%>">Profile</a></li>
                                        <!-- <li class="nav-item"><a class="nav-link" href="/coupon">Coupon</a></li> -->
										<li class="nav-item"><a class="nav-link" href="/orders">Orders</a></li>
								  </ul>
							 </li>
						</ul>
						<ul class="nav navbar-nav navbar-right">
							 <li class="nav-item">
								  <button class="search"><span class="lnr lnr-magnifier" id="search"></span></button>
							 </li>
						</ul>
				  </div>
            </div>
        </nav>
    </div>
    <div class="search_input" id="search_input_box">
        <div class="container">
            <form class="d-flex justify-content-between">
                <input type="text" class="form-control" id="search_input" placeholder="Search Here">
                <button type="submit" class="btn"></button>
                <span class="lnr lnr-cross" id="close_search" title="Close Search"></span>
            </form>
        </div>
    </div>
</header>
<!-- End Header Area -->
	<!-- Start Banner Area -->
	<section class="banner-area organic-breadcrumb">
		<div class="container">
			<div class="breadcrumb-banner d-flex flex-wrap align-items-center justify-content-end">
				<div class="col-first">
					<h1>Contact Us</h1>
					<nav class="d-flex align-items-center">
						<a href="index.html">Home<span class="lnr lnr-arrow-right"></span></a>
						<a href="category.html">Contact</a>
					</nav>
				</div>
			</div>
		</div>
	</section>
	<!-- End Banner Area -->

	<!--================Contact Area =================-->
	<section class="contact_area section_gap_bottom">
		<div class="container">
			<div id="mapBox" class="mapBox" data-lat="40.701083" data-lon="-74.1522848" data-zoom="13" data-info="PO Box CT16122 Collins Street West, Victoria 8007, Australia."
			 data-mlat="40.701083" data-mlon="-74.1522848">
			</div>
			<div class="row">
				<div class="col-lg-3">
					<div class="contact_info">
						<div class="info_item">
							<i class="lnr lnr-home"></i>
							<h6>California, United States</h6>
							<p>Santa monica bullevard</p>
						</div>
						<div class="info_item">
							<i class="lnr lnr-phone-handset"></i>
							<h6><a href="#">00 (440) 9865 562</a></h6>
							<p>Mon to Fri 9am to 6 pm</p>
						</div>
						<div class="info_item">
							<i class="lnr lnr-envelope"></i>
							<h6><a href="#">support@colorlib.com</a></h6>
							<p>Send us your query anytime!</p>
						</div>
					</div>
				</div>
				<div class="col-lg-9">
					<form class="row contact_form" id="contactForm" onsubmit="submitForm(event)">
    <div class="col-md-6">
        <div class="form-group">
            <input type="text" class="form-control" id="name" name="name" placeholder="Enter your name" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Enter your name'">
        </div>
        <div class="form-group">
            <input type="email" class="form-control" id="email" name="email" placeholder="Enter email address" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Enter email address'">
        </div>
        <div class="form-group">
            <input type="text" class="form-control" id="subject" name="subject" placeholder="Enter Subject" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Enter Subject'">
        </div>
    </div>
    <div class="col-md-6">
        <div class="form-group">
            <textarea class="form-control" name="message" id="message" rows="1" placeholder="Enter Message" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Enter Message'"></textarea>
        </div>
    </div>
    <div class="col-md-12 text-right">
        <button type="submit" class="primary-btn">Send Message</button>
    </div>
</form>

				</div>
			</div>
		</div>
	</section>
	<!--================Contact Area =================-->
<!-- start footer Area -->
<%- include ('../layouts/userContentFooter.ejs')%>
<!-- Include axios and your own script -->
<script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
<script src="https://cdn.jsdelivr.net/npm/axios/dist/axios.min.js"></script>
<script>
    async function submitForm(event) {
        try {
            // Prevent the default form submission
            event.preventDefault();

            const response = await axios.post('/contact', {
                name: document.getElementById('name').value,
                email: document.getElementById('email').value,
                subject: document.getElementById('subject').value,
                message: document.getElementById('message').value,
            });

            if (response.data.success) {
                // Show success message and redirect to home
                Swal.fire({
                    icon: 'success',
                    title: 'Success',
                    text: 'Thank you for contacting! We will get in touch with you.',
                }).then(() => {
                    window.location.href = '/home'; // Redirect to home
                });
            } else {
                // Show error message with try again button
                Swal.fire({
                    icon: 'error',
                    title: 'Error',
                    text: 'Sorry, some errors!',
                    showCancelButton: true,
                    confirmButtonText: 'Try Again',
                });
            }
        } catch (error) {
            console.error('API Error:', error);
            // Handle other errors if needed
            Swal.fire({
                icon: 'error',
                title: 'Error',
                text: 'An error occurred. Please try again later.',
            });
        }
    }
</script>


<%- include ('../layouts/userfooter.ejs')%>